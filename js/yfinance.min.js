(function(e){var t={editor:null,init:function(){var t=this;tinymce.PluginManager.add("yfinance",function(n,r){n.addButton("yfinance",{text:"Add Yahoo Finance Chart",icon:false,onclick:function(){if(!e("#yfinance").length){t.getForm()}else{e("#yfinance").fadeIn()}}});t.editor=n})},getForm:function(){e.ajax({url:ajaxurl,data:{action:"yfinance_get_form"},type:"post",success:function(t){e("#wpfooter").after(t)}})},insert:function(){var t=e("#yfinance form").serializeArray(),n="[yfinance";for(var r=0;r<t.length;r++){n+=" "+t[r].name+'="'+t[r].value+'"'}this.editor.insertContent(n+"]")}};t.init();e(document).on("submit","#yfinance form",function(n){n.preventDefault();t.insert();e("#yfinance").fadeOut()});e(document).on("click","#yfinance #yfinance_close",function(){e("#yfinance").fadeOut()})})(jQuery)